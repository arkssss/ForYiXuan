<include file="Base/head"/>
    <import type='css'  file = "CSS/TagCloud/jquery_tagsinput-revisited"/>
    <import type='js'  file = "JS/TagCloud/jquery_tagsinput-revisited"/>
	<style type="text/css">
		.jumbotron{
			background : url('__PHOTO__/Jumu/jumu.png');
			-moz-background-size:63px 100px; /* è€ç‰ˆæœ¬çš„ Firefox */
			background-size:1700px 400px;
			background-repeat:no-repeat;
			color:antiquewhite;
			height: 400px;
			padding: 200px
			
		}
		.jq22-content {
			width: 800px;
			margin: 20px auto;
		}
		.one_tag_group{
			margin: 50px 0;
			
		}
		.volist_tag{
			margin-top : 80px;
		}
    </style>
	</head>
	<body>
<div class="jumbotron">
</div>
<h1 class="text-center text-info">å°ä»»ä»»åŒå­¦å¸¸æ¥ç§è‰æ‹”è‰å“¦</h1>
<h2 class="text-center text-info">è¾“å…¥ä¹‹åæŒ‰enter(å›è½¦é”®)æ·»åŠ , åˆ é™¤ç›´æ¥ç‚¹å³ä¸Šå°å‰å‰, æœ€ååˆ«å¿˜äº†ç¡®å®šæ‰ä¼šç”Ÿæ•ˆå“¦ğŸ·</h2>
<div class="jq22-content volist_tag">
		<hr/>
		<h2>å·²æœ‰è¶³è¿¹ç¼–è¾‘</h2>
        <volist name="fixplace" id="places">
				<div class="one_tag_group">
					<h3 class="text-center">{$places.title}</h3>
					<input class="tags" id="{$places.id}" type="text" old = "{$places.place}" value= "{$places.place}">  
					<br/>      
					<button class="tag_submit btn btn-primary btn-lg" name='{$places.id}' type='{$places.type}'>ç¡®å®š</button>
				</div>
		</volist>   
		<hr/>
		<h2>æ–°å¢è‡ªå®šä¹‰è¶³è¿¹</h2>
		<form role="form">
				<div class="form-group">
				   <label for="tag_name">è¶³è¿¹åç§°</label>
				   <input type="text" class="form-control" id='new_tag_name' name='name' placeholder="è¯·è¾“å…¥è¶³è¿¹åç§°">
				</div>
				<div class="form-group">
					<label for="tag_des">è¶³è¿¹æè¿°</label>
					<input type="text" class="form-control" id='new_tag_des' name='des' placeholder="ä¸ºæ–°å¢åŠ çš„è¶³è¿¹åŠ å…¥ç®€çŸ­çš„æè¿°ä¿¡æ¯å§">
				</div>
				<button type="button" class="new_tag_submit btn btn-primary btn-lg">æäº¤</button>
		</form>
</div>
<include file="Base/dialog_isyixuan"/>
<script>
$(function() {
// æ–°å¢è¶³è¿¹æäº¤
$(".new_tag_submit").click(function(){

	//ä¸æ˜¯è‰ºç’‡åˆ™é€€å‡º
	if(!is_yixuan()) return;

	var name = $("#new_tag_name").val();
	var des  = $("#new_tag_des").val();

	if(name && des) {
	var theurl = "{:U('TagCloud/add_tag')}"
			$.post(
				theurl,
				{	
					'name'  : name,
					'des'   : des
				},
				function(data) {
					alert(data);
					location.reload();

				}
			)

	}else{

		alert("å°ä»»ä»»ä¸èƒ½æäº¤ç©ºå†…å®¹å“¦");


	}



})


$(".tag_submit").click(function(){

		//æ˜¯ä¸æ˜¯è‰ºç’‡çš„éªŒè¯åˆ¤æ–­
		if(!is_yixuan()) return false;

		var button_name = $(this).attr('name');
		var button_type = $(this).attr('type');
		

		var old_places = $("#"+button_name+"").attr("old")
		var new_places = $("#"+button_name+"").val()

		var theurl = "{:U('TagCloud/save_tag')}";
		$.post(
			theurl,
			{	
				'new_places'  : new_places,
				'old_places'  : old_places,
				'tag_type'    : button_type,
			},
			function(data) {
				alert(data);
				location.reload();

			}
		)

})




// ----------------------- original plugin

$('.tags').tagsInput({
	'onAddTag': function(input, value) {
		console.log('tag added', input, value);
	},
	'onRemoveTag': function(input, value) {
		console.log('tag removed', input, value);
	},
	'onChange': function(input, value) {
		console.log('change triggered', input, value);
	}
});



});
</script>
</body>
</html>